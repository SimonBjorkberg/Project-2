<section class="bg-teal-200 p-4">
  <div class="bg-white p-4 rounded-lg flex">
    <div class="mr-4">
      <img
        src="{{thread.author.profilePicture}}"
        alt="PP"
        class="w-12 h-12 rounded-full"
      />
    </div>
    <div>
      <p class="text-teal-500 text-sm mb-1">
        Posted by
        <span>
          <a
            href="/profile/{{thread.author.username}}"
            class="font-bold"
          >{{thread.author.username}}</a>
        </span>
      </p>
      <p class="text-sm mb-1">Posted: {{thread.createdAt}}</p>
      {{#if thread.auth}}
        <form
          action="/threads/{{thread._id}}/delete"
          method="post"
          class="inline"
        >
          <button type="submit" class="text-red-500">Delete</button>
        </form>
        <form
          action="/threads/{{thread._id}}/edit"
          method="get"
          class="inline ml-2"
        >
          <button type="submit" class="text-teal-500">Edit</button>
        </form>
      {{/if}}
      <form
        action="/threads/{{thread._id}}/like"
        method="post"
        class="inline ml-2"
      >
        <button type="submit" class="text-teal-500">
          {{thread.likes.length}}
        </button>
      </form>
    </div>
    <div>
      <h2 class="text-xl font-bold mb-2">{{thread.title}}</h2>
      <p>{{thread.content}}</p>
    </div>
  </div>
  {{#each thread.posts}}
    <div class="bg-white mt-4 p-4 rounded-lg">
      <div class="flex items-center">
        <img
          src="{{this.author.profilePicture}}"
          alt="PP"
          class="w-8 h-8 rounded-full"
        />
        <p class="ml-2">Posted by:
          <span><a
              href="/profile/{{this.author.username}}"
              class="text-teal-500"
            >{{this.author.username}}</a></span></p>
      </div>
      <div>
        <p class="mt-2">{{this.content}}</p>
      </div>
      <div class="mt-4">
        {{#if auth}}
          <form action="/post/{{this._id}}/edit" method="get" class="inline">
            <button type="submit" class="text-teal-500">Edit</button>
          </form>
          <form
            action="/post/{{this._id}}/delete"
            method="post"
            class="inline ml-2"
          >
            <button type="submit" class="text-red-500">Delete</button>
          </form>
        {{/if}}
        <form
          action="/post/{{this._id}}/like"
          method="post"
          class="inline ml-2"
        >
          <button
            type="submit"
            class="text-teal-500"
          >{{this.likes.length}}</button>
        </form>
      </div>
    </div>
  {{/each}}
</section>

<div class="mt-4">
  <form action="/post/{{thread._id}}" method="post">
    <div class="grid grid-cols-2 gap-4">
      <div>
        <input
          type="text"
          name="content"
          required
          class="w-full px-4 py-2 rounded-lg border border-teal-300 focus:outline-none focus:ring focus:ring-teal-400"
        />
      </div>
      <div class="flex">
        <button
          type="submit"
          class="bg-teal-600 text-white rounded-lg px-4 py-2"
        >Post</button>
      </div>
    </div>
  </form>
</div>